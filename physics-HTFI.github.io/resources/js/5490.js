"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[5490],{5490:(t,s,e)=>{e.r(s),e.d(s,{spec:()=>u});var a=e(1550);const i=(t,s)=>Math.tanh(s[2]*Math.cos(s[3]*t)),h=(t,s)=>-s[2]*s[3]*Math.sin(s[3]*t)/Math.pow(Math.cosh(s[2]*Math.cos(s[3]*t)),2),n=(t,s,e,a)=>a[0]*Math.sin(a[1]*t)*i(s,a)*i(e,a),c=(t,s,e,a)=>a[0]*a[1]*Math.cos(a[1]*t)*i(s,a)*i(e,a),o=(t,s,e,a)=>{const n=a[0]*Math.sin(a[1]*t);return[n*h(s,a)*i(e,a),n*i(s,a)*h(e,a)]};class r{constructor(t,s){this.Gs={num_constraints:5,M:new a.V([1,1,1]),G:(t,s,e)=>((t,s,e,i)=>{const[h,r,x]=e.dat;return 0==t?{G:x-n(s,h,r,i),G_t:-c(s,h,r,i),G_x:new a.V([...o(s,h,r,i).map((t=>-t)),1])}:1==t?{G:h+2,G_t:0,G_x:new a.V([1,0,0])}:2==t?{G:2-h,G_t:0,G_x:new a.V([-1,0,0])}:3==t?{G:r+2,G_t:0,G_x:new a.V([0,1,0])}:4==t?{G:2-r,G_t:0,G_x:new a.V([0,-1,0])}:void 0})(t,s,e,this.a)},this.reset=()=>this.X=this.X0.clone(),this.proceed=(t,s)=>this.X=a.ME.RK4_collision(t,this.X,a.ME.dXdt_g,s,this.Gs),this.E=t=>(0,a.uZ)(this.X,1),this.a=t.a,this.ball=a.ay.Ball(.1,s),this.is_master=0==s,this.X0=new a.V([...t.x0,...t.v0]),this.X=this.reset()}draw(t){this.ball.position=this.X.to_Vector3(),this.is_master&&x.forEach((s=>a.ay.UpdateZ(s,((s,e)=>n(t,s,e,this.a)))))}}let x;const _=()=>{a.jG.set_2D(4.6,new a.V([0,0,1]).to_Vector3()),a.ay.Ground(2),x=[a.ay.Curve(-2,2,200)]},G=()=>{a.jG.set_3D(6,.4,.4),x=a.ay.Surface([-2,-2],[2,2],[30,30],8).getChildMeshes().map((t=>t))},v=[.1,6,2,Math.PI],l=[.15,2,10,Math.PI],u={title:"変形する床との衝突",comment:"太いグリッドの間隔: 1m",cases:[{title:"3次元（滑らか）",setup:G,init:[{x0:[-.9,0,.8],v0:[.1,.1,0],a:v},{x0:[-.3,0,.8],v0:[.1,.1,0],a:v},{x0:[.3,0,.8],v0:[.1,.1,0],a:v},{x0:[.9,0,.8],v0:[.1,.1,0],a:v}]},{title:"同（角ばった）",setup:G,init:[{x0:[-.9,0,.8],v0:[.1,.1,0],a:l},{x0:[-.3,0,.8],v0:[.1,.1,0],a:l},{x0:[.3,0,.8],v0:[.1,.1,0],a:l},{x0:[.9,0,.8],v0:[.1,.1,0],a:l}]},{title:"2次元（滑らか）",setup:_,init:[{x0:[-.9,0,.8],v0:[.1,0,0],a:v},{x0:[-.3,0,.8],v0:[.1,0,0],a:v},{x0:[.3,0,.8],v0:[.1,0,0],a:v},{x0:[.9,0,.8],v0:[.1,0,0],a:v}]},{title:"同（角ばった）",setup:_,init:[{x0:[-.9,0,.8],v0:[.1,0,0],a:l},{x0:[-.3,0,.8],v0:[.1,0,0],a:l},{x0:[.3,0,.8],v0:[.1,0,0],a:l},{x0:[.9,0,.8],v0:[.1,0,0],a:l}]}],screenshot:{case:0,first_frame_sec:0,end_sec:2,fps:20},generator:(t,s)=>new r(t,s)}}}]);