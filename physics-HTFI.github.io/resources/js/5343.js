"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[5343],{5343:(e,t,s)=>{s.r(t),s.d(t,{spec:()=>_});var a=s(1550),n=s(4088);let i,c,o,r,l=0;const h=.5;class f{constructor(e,t){if(this.slices=[new a.p2(1),new a.p2(1)],this.has_charge=e.has_charge,this.deviation=e.deviation,this.coeff=new a.V([0,0,e.coeff]),this.has_charge){const e=a.ay.Ball(.02,0),t=a.ay.Ball(.02,2),s=n.iC.Delta_Rho_max(this.deviation);e.position.z=-s,t.position.z=s}const s=[[],[]],f=[[],[]],d=a.ay.Arrow(0),u=a.ay.Arrow(1);for(let e=0;e<441;e++)for(let t=0;t<2;t++)s[t].push(0===e?d:d.createInstance("E"+e+t)),f[t].push(0===e?u:u.createInstance("B"+e+t));this.draw=e=>{i=l>0||!(l<0)&&i,this.slices[0].setEnabled(!0),this.slices[1].setEnabled(c),this.slices[0].setDirection(i?2:0),this.slices[1].setDirection(i?0:1),c?(this.slices[0].setOffset(i?[-.5+l,0,-l]:[-l,-.5-l,0]),this.slices[1].setOffset(i?[l,0,h-l]:[-.5-l,-l,0])):this.slices[0].setOffset(i?[0,0,-l]:[-l,0,0]),this.slices.forEach(((t,i)=>{t.getPos(21).forEach(((c,l)=>{if(s[i][l].setEnabled(t.frame.isEnabled()&&o),f[i][l].setEnabled(t.frame.isEnabled()&&r),!t.frame.isEnabled())return;const[h,d]=((e,t,s,a,i)=>{let[c,o]=n.iC.EB_Delta(e,t,s,a);if(!i){const t=n.iC.E_Delta_infty(e,s,a.negate123());c=c.plus(t)}return[c,o]})(c,e,this.deviation,this.coeff,this.has_charge);a.ay.Set_ArrowPosition(s[i][l],c,h,1),a.ay.Set_ArrowPosition(f[i][l],c,d,n.c)}))}));this.slices.forEach((e=>{if(!e.frame.isEnabled())return;const t=e.getPos(71),s=e.getDat(71);t.forEach(((e,t)=>{const a=this.has_charge?n.iC.Delta_Rho(e,this.deviation,this.coeff):0;n.iC.SetRGBA(s,t,(a+2.5)/5)})),e.updateDat()}))}}}let d;const u=()=>{void 0!==d&&(d.value=l.toString())},_={title:"電磁場の時間発展（電流なし）",comment:"電荷は＋が赤、-が青<br>１辺の長さ: 1m",cases:[{title:"z軸に平行な初期電場",setup:u,init:[{has_charge:!0,deviation:5,coeff:.03}]},{title:"電荷なし",setup:u,init:[{has_charge:!1,deviation:5,coeff:.03}]}],config:{time_multiplier:5e-10,start_wait:.2,restart_time:8},init:()=>{a.jG.set_3D(2,1.3,.35,!0),l=0,i=!0,o=!0,r=!0,l=0,c=!0,d=void 0},controls:[{type:"label",text:"電磁場"},[{type:"radio",name:"EB",text:"電場",checked:()=>o&&!r,changedToChecked:()=>[o,r]=[!0,!1],color:"#ff0000"},{type:"radio",name:"EB",text:"磁場",checked:()=>!o&&r,changedToChecked:()=>[o,r]=[!1,!0],color:"#00b700"},{type:"radio",name:"EB",text:"両方",checked:()=>o&&r,changedToChecked:()=>[o,r]=[!0,!0]}],{type:"label",text:"スライス"},[{type:"radio",name:"slice",text:"1面",checked:()=>!c,changedToChecked:()=>c=!1},{type:"radio",name:"slice",text:"2面",checked:()=>c,changedToChecked:()=>c=!0}],{type:"slider",text:"位置",value:()=>({value:l,min:-.5,max:h,step:.025}),input:(e,t)=>{l=e,d=t},change:()=>{}}],screenshot:{case:0,first_frame_sec:0,end_sec:2,fps:20},generator:(e,t)=>new f(e,t)}},4088:(e,t,s)=>{s.d(t,{c:()=>i,Zy:()=>c,f7:()=>o,fC:()=>r,iC:()=>l});var a=s(1008),n=s(1550);const i=299792458,c=8854187817e-21,o=2*Math.PI,r=Math.sqrt(2);class l{static EB_Delta(e,t,s,n){const c=e.len3();if(c<1e-5){const e=Math.tanh(s*i*t);return[n.scale(-1/o*-s*s*s*(1+2*(1-3*e*e)*(1-e*e))/3),a.V.Zero(3)]}const r=Math.tanh(s*c),l=Math.tanh(s*(c+i*t)),h=Math.tanh(s*(c-i*t)),f=.5*s*(1-l*l),d=.5*s*(1-h*h),u=-s*s*r*(1-r*r),_=-s*s*l*(1-l*l),m=-s*s*h*(1-h*h),p=u/c,E=-(_-2*u+m)/(2*c),g=(.5*(1+l)-2*(.5*(1+r))+.5*(1+h))/(2*c*c*c)-(f-2*(.5*s*(1-r*r))+d)/(2*c*c);return[n.scale(p-E+g).plus(e.scale((E-3*g)*n.dot36(e)/(c*c))).scale(-1/o),e.cross3(n).scale(-1/i*-1/o*(-(f-d)/c+(_-m))/(2*c*c))]}static E_Delta_init(e,t,s){const a=e.len3(),n=Math.tanh(t*a);if(a<1e-5)return s.scale(t*t*t/o);{const e=-t*t*n*(1-n*n);return s.scale(-1/o/a*e)}}static E_Delta_infty(e,t,s){const a=e.len3();if(a<1e-5)return s.scale(-1/o*-t*t*t/3);const n=Math.tanh(t*a),i=-t*t*n*(1-n*n),c=((.5*(1+n)-.5)/a-.5*t*(1-n*n))/a;return e.scale(s.dot36(e)/(a*a)).scale((3*c+i)/a).minus(s.scale(c/a)).scale(-1/o)}static Delta_Rho(e,t,s){const a=e.len3();if(a<1e-5)return 0;if(a>3/t)return 0;const n=Math.tanh(t*a);return e.dot36(s)/(o*a*a)*(-t*t*n*(1-n*n)/a- -t*t*t*(1-3*n*n)*(1-n*n))}static Delta_Rho_max(e){const t=t=>{const s=1e-5,n=l.Delta_Rho(new a.V([0,0,t]),e,new a.V([0,0,1]));return(l.Delta_Rho(new a.V([0,0,t+s]),e,new a.V([0,0,1]))-n)/s};let s=0,n=3/e;for(let e=0;e<20;e++){const e=(s+n)/2;console.log(e,t(e)),t(e)>0?n=e:s=e}return-t(s)<t(n)?s:n}static Delta(e,t){const s=e.len3();if(s<1e-5)return 2/o*t*t*t;if(s>3/t)return 0;const a=Math.tanh(t*s);return-2*(-t*t*a*(1-a*a))/(o*s)}static E_static_Delta(e,t,s){const n=e.len3();if(n<1e-5)return a.V.Zero(3);{const a=Math.tanh(t*n),i=.5*(1+a),r=.5*t*(1-a*a);return e.scale(s/(o*c)*(i-.5-n*r)/(n*n*n))}}static EB_LienardWiechert(e,t,s,n,r){const l=1/(2*o*c),h=1/i,f=h*h,d=e.minus(t),u=d.len3();if(u<1e-5)return[a.V.Zero(3),a.V.Zero(3)];const _=d.scale(1/u),m=_.minus(s.scale(h)),p=1/(1-f*s.sq3()),E=p*u*u*Math.pow(1-h*s.dot36(_),3),g=m.minus(d.scale(p*f).cross3(n.cross3(m))).scale(r*l/E);return[g,_.cross3(g).scale(h)]}static EB_ByParticle(e,t,s,n,c,o){let r=0,h=0,f=t;for(let s=0;s<10&&(h=t-1e-10*Math.pow(10,s),r=e.minus(n(h)).len3()-i*(t-h),!(r<0));s++){if(9==s)return{E:a.V.Zero(3),B:a.V.Zero(3),G:0};f=h}for(let s=0;s<10;s++){const s=(f+h)/2;r=e.minus(n(s)).len3()-i*(t-s),r<0?h=s:f=s}h=(h+f)/2;for(let s=0;s<5;s++){const s=n(h);r=e.minus(s).len3()-i*(t-h),h+=-r/(-e.minus(s).unit3().dot36(c(h))+i)}const[d,u]=l.EB_LienardWiechert(e,n(h),c(h),o(h),s);return{E:d,B:u,G:Math.abs(r)}}}l.SetRGBA=(e,t,s)=>{const a=s<.5?2*s:1,n=s<.5?2*s:2-2*s,i=s<.5?1:2-2*s,c=e=>Math.max(0,Math.min(1,e)),o=e=>Math.floor(255*c(e));e[4*t+0]=o(a),e[4*t+1]=o(n),e[4*t+2]=o(i),e[4*t+3]=o(.5-.5*c(n))},l.SetBallColor=(e,t)=>{const s=t<.5?2*t:1,a=t<.5?2*t:2-2*t,i=t<.5?1:2-2*t,c=e=>Math.max(0,Math.min(1,e)),o=e.material;o.ambientColor=new n.Wo(c(s),c(a),c(i)),o.alpha=1-o.ambientColor.g}}}]);