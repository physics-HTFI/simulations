"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[6598],{6598:(t,s,e)=>{e.r(s),e.d(s,{spec:()=>g});var i=e(1550);let r,n;class c{constructor(t,s){this.arrow_w=i.ay.Arrow(3),this.arrow_L=i.ay.Arrow(5),this.reset=()=>this.X=this.X0.clone(),this.proceed=(t,s)=>this.X=i.ME.RK4_free(t,this.X,this.dXdt,s),this.E=t=>(0,i.xV)(this.X,this.I0,w),this.X0=i.V.concat(new i.V(t.xg0),new i.V([1,0,0,0,1,0,0,0,1]),new i.V(t.vg0),new i.V(t.w0),new i.V(t.xc0)),this.I0=i.M.Id3().scale3x3(2*w*_*_/5),this.translation=new i.V([t.cylinder_x,0,0]),this.ball=i.ay.CollisionBall3D(_,t.color),this.contact=i.ay.Ball(.02,1),this.cylinder_height=t.cylinder_height,this.cylinder=i.ay.CylinderGrid(d,this.cylinder_height),this.cylinder.position.z=.8-this.cylinder_height/2,this.cylinder.position.x=t.cylinder_x,this.dXdt=i.ME.dXdt_roll(w,this.I0,[_,_,_],h,o,l,a,!0),this.X=this.reset()}draw(t){this.X.dat[2]<.8-this.cylinder_height&&this.reset();const{x:s,R:e,w:c,I:h}=(0,i.fN)(this.X,this.I0),o=this.X.slice3(18);this.ball.setPreTransformMatrix(e.to_Matrix()),this.ball.position=s.plus(this.translation).to_Vector3(),this.contact.position=o.plus(this.translation).to_Vector3(),this.arrow_w.setEnabled(r),this.arrow_L.setEnabled(n),i.ay.Set_ArrowPosition(this.arrow_w,s.plus(this.translation),c,.01),i.ay.Set_ArrowPosition(this.arrow_L,s.plus(this.translation),h.vec(c),1)}}const h=(t,s)=>{const e=1/Math.sqrt(t*t+s*s);return[e*t,e*s]},o=(t,s)=>{const e=1/Math.sqrt(t*t+s*s),i=e*e*e;return[e+i*t*t,i*t*s,i*t*s,e+i*s*s]},a=(t,s)=>{const e=s.dat;return new i.M(3,6,[1,0,0,0,-e[2],e[1],0,1,0,e[2],0,-e[0],0,0,1,-e[1],e[0],0])},l=(t,s,e,r)=>{const n=r.dat;return new i.M(3,6,[0,0,0,0,-n[2],n[1],0,0,0,n[2],0,-n[0],0,0,0,-n[1],n[0],0])},[d,w,_]=[.5,1,.1],y=t=>({vg0:t,w0:new i.V(t).cross3(new i.V([_,0,0])).scale(1/(_*_)).dat}),g={title:"垂直円筒内を転がる球",comment:`緑点は円筒との接点<br>球の半径: ${_}m<br>円筒の半径: ${d}m`,cases:[{title:"水平速度を持つと上下振動する",init:[Object.assign(Object.assign({xg0:[d-_,0,.5],xc0:[d,0,.5],R0:[0,0,0]},y([0,4,0])),{color:0,cylinder_height:5,cylinder_x:-1.2}),Object.assign(Object.assign({xg0:[d-_,0,.5],xc0:[d,0,.5],R0:[0,0,0]},y([0,1.9,0])),{color:0,cylinder_height:5,cylinder_x:0}),Object.assign(Object.assign({xg0:[d-_,0,.5],xc0:[d,0,.5],R0:[0,0,0]},y([0,0,0])),{color:0,cylinder_height:5,cylinder_x:1.2})],setup:()=>{i.jG.set_3D(5,.5,.4)}}],init:()=>{r=!1,n=!1},controls:[{type:"check",text:"角速度",checked:()=>r,change:t=>r=t,color:"#ff9b38"},{type:"check",text:"角運動量",checked:()=>n,change:t=>n=t,color:"#b76eff"}],screenshot:{case:0,first_frame_sec:0,end_sec:2,fps:20},generator:(t,s)=>new c(t,s)}}}]);