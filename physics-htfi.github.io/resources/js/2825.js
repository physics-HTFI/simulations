"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[2825],{2825:(t,s,e)=>{e.r(s),e.d(s,{spec:()=>n});var r=e(1550);let o,i;class h{constructor(t,s){this.arrow_w=r.ay.Arrow(3),this.arrow_L=r.ay.Arrow(5),this.dXdt=(t,s)=>{const{R:e,w:o,I:i}=(0,r.fN)(s,this.I0),h=o.cross3x3(),c=e.vec(this.xg0).cross3(r.g.scale(this.m)),a=h.mat(e),n=i.inverse123().vec(c.minus(h.mat(i).vec(o)));return(0,r.Rm)(r.V.Zero(3),a,r.V.Zero(3),n)},this.reset=()=>this.X=this.X=(0,r.Rm)(r.V.Zero(3),r.M.Id3(),r.V.Zero(3),this.w0),this.E=t=>(0,r.xV)(this.X,this.I0,this.m,this.xg0);const e=new r.V(t.x0.flat()).split3();this.m=t.m.reduce(((t,s)=>t+s),0),this.O=new r.V(t.O),this.w0=new r.V(t.w0),this.I0=new r.M(3,3,[0,0,0,0,0,0,0,0,0]);const o=(t,s)=>{const e=s*t.sq3();for(let r=0;r<3;r++){this.I0.dat[3*r+r]+=e;for(let e=0;e<3;e++)this.I0.dat[3*r+e]-=s*t.dat[r]*t.dat[e]}};e.forEach(((s,e)=>o(s,t.m[e]))),this.xg0=e[0].scale(t.m[0]).plus(e[1].scale(t.m[1])).plus(e[2].scale(t.m[2])).scale(1/this.m),this.mesh=r.ay.SolidPendulum(e,t.m,t.color),this.mesh.position=this.O.to_Vector3(),this.X=this.reset()}draw(t){const{R:s,w:e,I:h}=(0,r.fN)(this.X,this.I0);this.mesh.setPreTransformMatrix(s.to_Matrix()),this.arrow_w.setEnabled(o),this.arrow_L.setEnabled(i),r.ay.Set_ArrowPosition(this.arrow_w,this.O,e,.1),r.ay.Set_ArrowPosition(this.arrow_L,this.O,h.vec(e),.2)}proceed(t,s){this.X=r.ME.RK4_free(t,this.X,this.dXdt,s)}}const c=()=>{r.jG.set_3D(4,.5,.35);r.ay.Ground(3).position.z=-1},a=(t,s)=>{const e=t*Math.sin(2*Math.PI/3),r=t*Math.cos(2*Math.PI/3);return[[t,0,s],[r,e,s],[r,-e,s]]},n={title:"1点を固定した剛体",comment:"総質量はすべて同じ<br>床の太いグリッドの間隔: 1m<br>青点は動きを見やすくするため",cases:[{title:"こま（低・中・高速）",init:[{O:[-1,0,0],w0:[0,1,5],x0:a(.4,.3),m:[1,1,1],color:0},{O:[0,0,0],w0:[0,1,10],x0:a(.4,.3),m:[1,1,1],color:0},{O:[1,0,0],w0:[0,1,15],x0:a(.4,.3),m:[1,1,1],color:0}],setup:c},{title:"振り子（対称・非対称）",init:[{O:[-.75,.75,0],w0:[5,5,2],x0:a(.3,-.5),m:[1,1,1],color:0},{O:[.75,.75,0],w0:[5,5,2],x0:a(.3,-.5),m:[2.5,.25,.25],color:1},{O:[-.75,-.75,0],w0:[2,2,2],x0:a(.3,-.5),m:[1,1,1],color:0},{O:[.75,-.75,0],w0:[2,2,2],x0:a(.3,-.5),m:[2.5,.25,.25],color:1}],setup:c}],init:()=>{o=!1,i=!1},controls:[{type:"check",text:"角速度",checked:()=>o,change:t=>o=t,color:"#ff9b38"},{type:"check",text:"角運動量",checked:()=>i,change:t=>i=t,color:"#b76eff"}],screenshot:{case:0,first_frame_sec:0,end_sec:2,fps:20},generator:(t,s)=>new h(t,s)}}}]);