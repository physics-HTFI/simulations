"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[3295],{3295:(t,e,s)=>{s.r(e),s.d(e,{spec:()=>_});var a=s(1550),n=s(4088);let i,c,o,r,l,h=0;const d=.5,u=(t,e,s,i,c)=>{const o=n.f7/c;return n.iC.Delta_Rho(t,s,new a.V([0,0,Math.sin(o*e)/o*i]))};class f{constructor(t,e){this.slices=[new a.p2(1),new a.p2(1)],this.deviation=t.deviation,this.Q=t.Q,this.T=t.T;const s=a.ay.Ball(.02,2),f=a.ay.Ball(.02,0),m=n.iC.Delta_Rho_max(this.deviation);s.position.z=m,f.position.z=-m;const p=[[],[]],_=[[],[]],E=[[],[]],M=a.ay.Arrow(0),w=a.ay.Arrow(1),C=a.ay.Arrow(5);for(let t=0;t<441;t++)for(let e=0;e<2;e++)p[e].push(0===t?M:M.createInstance("E"+t+e)),_[e].push(0===t?w:w.createInstance("B"+t+e)),E[e].push(0===t?C:C.createInstance("j"+t+e));this.draw=t=>{i=h>0||!(h<0)&&i,this.slices[0].setEnabled(!0),this.slices[1].setEnabled(c),this.slices[0].setDirection(i?2:0),this.slices[1].setDirection(i?0:1),c?(this.slices[0].setOffset(i?[-.5+h,0,-h]:[-h,-.5-h,0]),this.slices[1].setOffset(i?[h,0,d-h]:[-.5-h,-h,0])):this.slices[0].setOffset(i?[0,0,-h]:[-h,0,0]),this.slices.forEach(((e,s)=>{e.getPos(21).forEach(((i,c)=>{if(p[s][c].setEnabled(e.frame.isEnabled()&&o),_[s][c].setEnabled(e.frame.isEnabled()&&r),E[s][c].setEnabled(e.frame.isEnabled()&&l),!e.frame.isEnabled())return;const[h,d]=((t,e,s,i,c)=>{const o=t.len3(),r=Math.max(0,e-(o+3/s)/n.c),l=Math.min(e,e-(o-3/s)/n.c),h=(l-r)/30,d=n.f7/c,u=i/n.Zy,f=n.iC.E_Delta_infty(t,s,new a.V([0,0,u/d*Math.sin(d*r)])),[m,p]=n.iC.EB_Delta(t,e-r,s,new a.V([0,0,.5*h*u*Math.cos(d*r)])),[_,E]=n.iC.EB_Delta(t,e-l,s,new a.V([0,0,.5*h*u*Math.cos(d*l)]));let M=f.plus(m).plus(_),w=p.plus(E);for(let i=1;i<30;i++){const[c,o]=n.iC.EB_Delta(t,e-(r+i*h),s,new a.V([0,0,h*u*Math.cos(d*(r+i*h))]));M=M.plus(c),w=w.plus(o)}return[M,w]})(i,t,this.deviation,this.Q,this.T);if(a.ay.Set_ArrowPosition(p[s][c],i,h,1),a.ay.Set_ArrowPosition(_[s][c],i,d,n.c),l){const e=((t,e,s,i,c)=>n.iC.E_Delta_init(t,s,new a.V([0,0,-i*Math.cos(e*n.f7/c)])))(i,t,this.deviation,this.Q,this.T);a.ay.Set_ArrowPosition(E[s][c],i,e,10)}}))}));const e=3e-11,M=u(new a.V([0,0,m]),t,this.deviation,this.Q,this.T);n.iC.SetBallColor(s,(M+e)/6e-11),n.iC.SetBallColor(f,(-M+e)/6e-11),this.slices.forEach((s=>{if(!s.frame.isEnabled())return;const a=s.getPos(71),i=s.getDat(71);a.forEach(((s,a)=>{const c=u(s,t,this.deviation,this.Q,this.T);n.iC.SetRGBA(i,a,(c+e)/6e-11)})),s.updateDat()}))}}}let m;const p=()=>{void 0!==m&&(m.value=h.toString())},_={title:"電気双極子放射",comment:"電荷は＋が赤、-が青<br>1辺の長さ: 1m",cases:[{title:"電気双極子放射（周期: 1ナノ秒）",setup:p,init:[{deviation:10,Q:15e-5,T:1e-9}]},{title:"電気双極子放射（周期: 2ナノ秒）",setup:p,init:[{deviation:10,Q:25e-5,T:2e-9}]}],config:{time_multiplier:5e-10},init:()=>{a.jG.set_3D(2,1.3,.35,!0),h=0,i=!0,c=!0,o=!0,r=!0,l=!1,h=0,m=void 0},controls:[{type:"label",text:"電磁場"},[{type:"radio",name:"EB",text:"電場",checked:()=>o&&!r,changedToChecked:()=>[o,r]=[!0,!1],color:"#ff0000"},{type:"radio",name:"EB",text:"磁場",checked:()=>!o&&r,changedToChecked:()=>[o,r]=[!1,!0],color:"#00b700"},{type:"radio",name:"EB",text:"両方",checked:()=>o&&r,changedToChecked:()=>[o,r]=[!0,!0]}],[{type:"check",text:"電流",checked:()=>l,change:t=>l=t,color:"#b76eff"}],{type:"label",text:"スライス"},[{type:"radio",name:"slice",text:"1面",checked:()=>!c,changedToChecked:()=>c=!1},{type:"radio",name:"slice",text:"2面",checked:()=>c,changedToChecked:()=>c=!0}],{type:"slider",text:"位置",value:()=>({value:h,min:-.5,max:d,step:.025}),input:(t,e)=>{h=t,m=e}}],screenshot:{case:0,first_frame_sec:0,end_sec:2,fps:20},generator:(t,e)=>new f(t,e)}},4088:(t,e,s)=>{s.d(e,{c:()=>i,Zy:()=>c,f7:()=>o,fC:()=>r,iC:()=>l});var a=s(1008),n=s(1550);const i=299792458,c=8854187817e-21,o=2*Math.PI,r=Math.sqrt(2);class l{static EB_Delta(t,e,s,n){const c=t.len3();if(c<1e-5){const t=Math.tanh(s*i*e);return[n.scale(-1/o*-s*s*s*(1+2*(1-3*t*t)*(1-t*t))/3),a.V.Zero(3)]}const r=Math.tanh(s*c),l=Math.tanh(s*(c+i*e)),h=Math.tanh(s*(c-i*e)),d=.5*s*(1-l*l),u=.5*s*(1-h*h),f=-s*s*r*(1-r*r),m=-s*s*l*(1-l*l),p=-s*s*h*(1-h*h),_=f/c,E=-(m-2*f+p)/(2*c),M=(.5*(1+l)-2*(.5*(1+r))+.5*(1+h))/(2*c*c*c)-(d-2*(.5*s*(1-r*r))+u)/(2*c*c);return[n.scale(_-E+M).plus(t.scale((E-3*M)*n.dot36(t)/(c*c))).scale(-1/o),t.cross3(n).scale(-1/i*-1/o*(-(d-u)/c+(m-p))/(2*c*c))]}static E_Delta_init(t,e,s){const a=t.len3(),n=Math.tanh(e*a);if(a<1e-5)return s.scale(e*e*e/o);{const t=-e*e*n*(1-n*n);return s.scale(-1/o/a*t)}}static E_Delta_infty(t,e,s){const a=t.len3();if(a<1e-5)return s.scale(-1/o*-e*e*e/3);const n=Math.tanh(e*a),i=-e*e*n*(1-n*n),c=((.5*(1+n)-.5)/a-.5*e*(1-n*n))/a;return t.scale(s.dot36(t)/(a*a)).scale((3*c+i)/a).minus(s.scale(c/a)).scale(-1/o)}static Delta_Rho(t,e,s){const a=t.len3();if(a<1e-5)return 0;if(a>3/e)return 0;const n=Math.tanh(e*a);return t.dot36(s)/(o*a*a)*(-e*e*n*(1-n*n)/a- -e*e*e*(1-3*n*n)*(1-n*n))}static Delta_Rho_max(t){const e=e=>{const s=1e-5,n=l.Delta_Rho(new a.V([0,0,e]),t,new a.V([0,0,1]));return(l.Delta_Rho(new a.V([0,0,e+s]),t,new a.V([0,0,1]))-n)/s};let s=0,n=3/t;for(let t=0;t<20;t++){const t=(s+n)/2;console.log(t,e(t)),e(t)>0?n=t:s=t}return-e(s)<e(n)?s:n}static Delta(t,e){const s=t.len3();if(s<1e-5)return 2/o*e*e*e;if(s>3/e)return 0;const a=Math.tanh(e*s);return-2*(-e*e*a*(1-a*a))/(o*s)}static E_static_Delta(t,e,s){const n=t.len3();if(n<1e-5)return a.V.Zero(3);{const a=Math.tanh(e*n),i=.5*(1+a),r=.5*e*(1-a*a);return t.scale(s/(o*c)*(i-.5-n*r)/(n*n*n))}}static EB_LienardWiechert(t,e,s,n,r){const l=1/(2*o*c),h=1/i,d=h*h,u=t.minus(e),f=u.len3();if(f<1e-5)return[a.V.Zero(3),a.V.Zero(3)];const m=u.scale(1/f),p=m.minus(s.scale(h)),_=1/(1-d*s.sq3()),E=_*f*f*Math.pow(1-h*s.dot36(m),3),M=p.minus(u.scale(_*d).cross3(n.cross3(p))).scale(r*l/E);return[M,m.cross3(M).scale(h)]}static EB_ByParticle(t,e,s,n,c,o){let r=0,h=0,d=e;for(let s=0;s<10&&(h=e-1e-10*Math.pow(10,s),r=t.minus(n(h)).len3()-i*(e-h),!(r<0));s++){if(9==s)return{E:a.V.Zero(3),B:a.V.Zero(3),G:0};d=h}for(let s=0;s<10;s++){const s=(d+h)/2;r=t.minus(n(s)).len3()-i*(e-s),r<0?h=s:d=s}h=(h+d)/2;for(let s=0;s<5;s++){const s=n(h);r=t.minus(s).len3()-i*(e-h),h+=-r/(-t.minus(s).unit3().dot36(c(h))+i)}const[u,f]=l.EB_LienardWiechert(t,n(h),c(h),o(h),s);return{E:u,B:f,G:Math.abs(r)}}}l.SetRGBA=(t,e,s)=>{const a=s<.5?2*s:1,n=s<.5?2*s:2-2*s,i=s<.5?1:2-2*s,c=t=>Math.max(0,Math.min(1,t)),o=t=>Math.floor(255*c(t));t[4*e+0]=o(a),t[4*e+1]=o(n),t[4*e+2]=o(i),t[4*e+3]=o(.5-.5*c(n))},l.SetBallColor=(t,e)=>{const s=e<.5?2*e:1,a=e<.5?2*e:2-2*e,i=e<.5?1:2-2*e,c=t=>Math.max(0,Math.min(1,t)),o=t.material;o.ambientColor=new n.Wo(c(s),c(a),c(i)),o.alpha=1-o.ambientColor.g}}}]);